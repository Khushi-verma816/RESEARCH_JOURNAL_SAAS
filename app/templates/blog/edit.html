{% extends "base.html" %}

{% block title %}Edit {{ post.title }} - Research Journal SaaS{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    <div style="background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <h1 style="color: #007bff; margin-bottom: 30px;">âœï¸ Edit Blog Post</h1>
        
        <form method="POST">
            <!-- Title -->
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; color: #333; font-weight: bold; font-size: 16px;">
                    Title <span style="color: red;">*</span>
                </label>
                <input type="text" name="title" value="{{ post.title }}" required
                       style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 18px; transition: border-color 0.3s;"
                       onfocus="this.style.borderColor='#007bff'" onblur="this.style.borderColor='#ddd'">
            </div>
            
            <!-- Excerpt -->
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; color: #333; font-weight: bold; font-size: 16px;">
                    Excerpt
                </label>
                <textarea name="excerpt" rows="3"
                          style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; resize: vertical; transition: border-color 0.3s;"
                          onfocus="this.style.borderColor='#007bff'" onblur="this.style.borderColor='#ddd'">{{ post.excerpt }}</textarea>
            </div>
            
            <!-- Content -->
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; color: #333; font-weight: bold; font-size: 16px;">
                    Content <span style="color: red;">*</span>
                </label>
                <textarea name="content" rows="20" required
                          style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; line-height: 1.6; resize: vertical; font-family: 'Georgia', serif; transition: border-color 0.3s;"
                          onfocus="this.style.borderColor='#007bff'" onblur="this.style.borderColor='#ddd'">{{ post.content }}</textarea>
            </div>
            
            <!-- Status Info -->
            <div style="padding: 15px; background: {% if post.status == 'published' %}#d4edda{% else %}#fff3cd{% endif %}; border-radius: 6px; margin-bottom: 25px;">
                <strong>Current Status:</strong> 
                <span style="text-transform: uppercase;">{{ post.status }}</span>
                {% if post.published_at %}
                    (Published on {{ post.published_at.strftime('%B %d, %Y') }})
                {% endif %}
            </div>
            
            <!-- Buttons -->
            <div style="display: flex; gap: 10px; justify-content: space-between;">
                <div style="display: flex; gap: 10px;">
                    <button type="submit" name="action" value="save"
                            style="padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
                        ğŸ’¾ Save Changes
                    </button>
                    {% if post.status == 'draft' %}
                    <button type="submit" name="action" value="publish"
                            style="padding: 12px 24px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
                        ğŸš€ Publish Now
                    </button>
                    {% else %}
                    <button type="submit" name="action" value="unpublish"
                            style="padding: 12px 24px; background: #ffc107; color: #333; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
                        ğŸ“¥ Unpublish
                    </button>
                    {% endif %}
                </div>
                <a href="{{ url_for('blog.my_posts') }}" 
                   style="padding: 12px 24px; background: #e9ecef; color: #333; text-decoration: none; border-radius: 6px; font-size: 16px; display: inline-block;">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
