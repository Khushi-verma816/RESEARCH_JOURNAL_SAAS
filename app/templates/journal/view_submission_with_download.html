{% extends "base.html" %}

{% block title %}{{ submission.title }} - Research Journal SaaS{% endblock %}

{% block content %}
<div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h1 style="color: #007bff; margin-bottom: 20px;">{{ submission.title }}</h1>
    
    <div style="background: #f8f9fa; padding: 20px; border-radius: 6px; margin-bottom: 20px;">
        <p style="color: #666; margin: 5px 0;"><strong>Journal:</strong> {{ submission.journal.name }}</p>
        <p style="color: #666; margin: 5px 0;"><strong>Author:</strong> {{ submission.author.full_name }}</p>
        <p style="color: #666; margin: 5px 0;">
            <strong>Status:</strong> 
            {% if submission.status == 'submitted' %}
                <span style="background: #007bff; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">SUBMITTED</span>
            {% elif submission.status == 'under_review' %}
                <span style="background: #ffc107; color: #333; padding: 4px 12px; border-radius: 12px; font-size: 12px;">UNDER REVIEW</span>
            {% elif submission.status == 'accepted' %}
                <span style="background: #28a745; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">ACCEPTED</span>
            {% elif submission.status == 'rejected' %}
                <span style="background: #dc3545; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px;">REJECTED</span>
            {% endif %}
        </p>
        <p style="color: #666; margin: 5px 0;"><strong>Submitted:</strong> {{ submission.submitted_at.strftime('%B %d, %Y') }}</p>
        
        <!-- Download Manuscript -->
        {% if submission.manuscript_file_url and submission.manuscript_file_url != 'placeholder.pdf' %}
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;">
            <p style="color: #333; margin: 0 0 10px 0;"><strong>üìé Manuscript File:</strong></p>
            <a href="{{ url_for('upload.download_manuscript', filename=submission.manuscript_file_url) }}" 
               style="padding: 8px 16px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">
                üì• Download Manuscript
            </a>
        </div>
        {% endif %}
    </div>
    
    <h3 style="color: #333; margin-top: 30px; margin-bottom: 15px;">Abstract</h3>
    <div style="background: #f8f9fa; padding: 20px; border-radius: 6px; line-height: 1.6;">
        <p style="color: #333;">{{ submission.abstract }}</p>
    </div>
    
    <!-- Reviews Section -->
    {% if reviews %}
    <h3 style="color: #333; margin-top: 30px; margin-bottom: 15px;">Reviews</h3>
    <div style="display: grid; gap: 15px;">
        {% for review in reviews %}
        <div style="border: 1px solid #ddd; padding: 15px; border-radius: 6px;">
            <p style="margin: 5px 0;"><strong>Reviewer:</strong> {{ review.reviewer.full_name }}</p>
            <p style="margin: 5px 0;">
                <strong>Status:</strong> 
                <span style="background: #6c757d; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px;">
                    {{ review.status|upper }}
                </span>
            </p>
            {% if review.comments %}
            <p style="margin: 10px 0 5px 0;"><strong>Comments:</strong></p>
            <p style="color: #666;">{{ review.comments }}</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div style="margin-top: 30px;">
        <a href="{{ url_for('journal.my_submissions') }}" 
           style="padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">
            ‚Üê Back to My Submissions
        </a>
    </div>
</div>
{% endblock %}
