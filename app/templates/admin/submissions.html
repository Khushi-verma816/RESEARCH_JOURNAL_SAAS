{% extends "base.html" %}

{% block title %}Manage Submissions - Research Journal SaaS{% endblock %}

{% block content %}
<div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h1 style="color: #007bff; margin-bottom: 25px;">ðŸ“‹ Manage Submissions</h1>
    
    <!-- Filter -->
    <div style="margin-bottom: 20px; display: flex; gap: 10px;">
        <a href="{{ url_for('admin.submissions', status='all') }}" 
           style="padding: 8px 16px; background: {% if status_filter == 'all' %}#007bff{% else %}#e9ecef{% endif %}; 
                  color: {% if status_filter == 'all' %}white{% else %}#333{% endif %}; 
                  text-decoration: none; border-radius: 4px;">
            All
        </a>
        <a href="{{ url_for('admin.submissions', status='submitted') }}" 
           style="padding: 8px 16px; background: {% if status_filter == 'submitted' %}#007bff{% else %}#e9ecef{% endif %}; 
                  color: {% if status_filter == 'submitted' %}white{% else %}#333{% endif %}; 
                  text-decoration: none; border-radius: 4px;">
            Submitted
        </a>
        <a href="{{ url_for('admin.submissions', status='under_review') }}" 
           style="padding: 8px 16px; background: {% if status_filter == 'under_review' %}#ffc107{% else %}#e9ecef{% endif %}; 
                  color: {% if status_filter == 'under_review' %}#333{% else %}#333{% endif %}; 
                  text-decoration: none; border-radius: 4px;">
            Under Review
        </a>
        <a href="{{ url_for('admin.submissions', status='accepted') }}" 
           style="padding: 8px 16px; background: {% if status_filter == 'accepted' %}#28a745{% else %}#e9ecef{% endif %}; 
                  color: {% if status_filter == 'accepted' %}white{% else %}#333{% endif %}; 
                  text-decoration: none; border-radius: 4px;">
            Accepted
        </a>
        <a href="{{ url_for('admin.submissions', status='rejected') }}" 
           style="padding: 8px 16px; background: {% if status_filter == 'rejected' %}#dc3545{% else %}#e9ecef{% endif %}; 
                  color: {% if status_filter == 'rejected' %}white{% else %}#333{% endif %}; 
                  text-decoration: none; border-radius: 4px;">
            Rejected
        </a>
    </div>
    
    <!-- Submissions List -->
    {% if submissions %}
        <div style="display: grid; gap: 15px;">
            {% for submission in submissions %}
            <div style="border: 1px solid #ddd; padding: 20px; border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div style="flex: 1;">
                        <h3 style="margin: 0 0 10px 0; color: #333;">{{ submission.title }}</h3>
                        <p style="margin: 5px 0; color: #666;">
                            <strong>Author:</strong> {{ submission.author.full_name }} ({{ submission.author.email }})
                        </p>
                        <p style="margin: 5px 0; color: #666;">
                            <strong>Journal:</strong> {{ submission.journal.name }}
                        </p>
                        <p style="margin: 5px 0; color: #666;">
                            <strong>Submitted:</strong> {{ submission.submitted_at.strftime('%B %d, %Y at %I:%M %p') }}
                        </p>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 10px; align-items: flex-end;">
                        {% if submission.status == 'submitted' %}
                            <span style="background: #007bff; color: white; padding: 6px 12px; border-radius: 12px; font-size: 12px;">SUBMITTED</span>
                        {% elif submission.status == 'under_review' %}
                            <span style="background: #ffc107; color: #333; padding: 6px 12px; border-radius: 12px; font-size: 12px;">UNDER REVIEW</span>
                        {% elif submission.status == 'accepted' %}
                            <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 12px; font-size: 12px;">ACCEPTED</span>
                        {% elif submission.status == 'rejected' %}
                            <span style="background: #dc3545; color: white; padding: 6px 12px; border-radius: 12px; font-size: 12px;">REJECTED</span>
                        {% endif %}
                        <a href="{{ url_for('admin.manage_submission', submission_id=submission.id) }}" 
                           style="padding: 8px 16px; background: #007bff; color: white; text-decoration: none; border-radius: 4px;">
                            Manage
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="color: #666; text-align: center; padding: 40px; background: #f8f9fa; border-radius: 6px;">
            No submissions found for this filter.
        </p>
    {% endif %}
</div>
{% endblock %}
